{
  "kind": "build_request",
  "title": "Fix admin role check blocking product addition",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the admin role/permission check that incorrectly blocks logged-in admin users from adding new products. The frontend's role verification logic (in ProductsPage.tsx and/or useUserRole.ts) must correctly identify the current user as admin and allow the 'Add New Product' action to proceed without showing the 'only admin can add new products' error.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "muncul hanya admin yang dapat menambah produk baru, padahal login sebagai admin tapi g bisa juga"
        ]
      },
      "acceptanceCriteria": [
        "A user logged in as admin can click the 'Add New Product' button without seeing the 'only admin can add new products' error message.",
        "The role check in ProductsPage.tsx correctly reads the admin role from useUserRole or useAuth and grants access.",
        "The backend authorization check (if any) correctly identifies the caller as admin and allows the addInventoryItem or equivalent call to succeed.",
        "Non-admin users (kasir/user roles) still see the appropriate restriction message."
      ]
    }
  ],
  "constraints": [
    "Do not change the overall role-based access control architecture.",
    "Do not modify files listed in frontend.immutablePaths."
  ],
  "nonGoals": [
    "Adding new user roles or permissions.",
    "Redesigning the product management UI.",
    "Changing any unrelated access control rules."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}